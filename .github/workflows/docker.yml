name: Docker
on:
  push:
  workflow_dispatch:
  
jobs:       
  power_shell:
    runs-on: ubuntu-24.04-ppc64le
    steps:
    - uses: actions/checkout@v4

    - name: Systemd
      run: |
        systemd-nspawn --quiet --link-journal=no --resolv-conf=auto --boot --machine main --set-credential=firstboot.locale:C.UTF-8 --set-credential=firstboot.timezone:Etc/UTC '--set-credential=ssh.authorized_keys.root:ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC69ph1aVvpaAsVKYJs2dlnkv9BC7XZS/0Uls9S02J/qhdeUbn9nA7lSInDapZVG/oPu5bzz8JDptKmuQxoQ60Se/1Flsk9EJ8ncmp3H0RgexyC8BdZdtJr8/Vf9ykfsv9h9M/d6dBZ6s2AoVRqIy0aC1ycJyicPZKFpaQwDB24nrRyO2pWbwdO/Mly9qV29LCCMIDAZ6gOmQVwx1Dg3zLS8ZMZjGrX8OpVUidn/Q2SzpjAPWua2mZxtGQSyNhFL2UP39entwDukxW7Rfgj8ygfyqhtdV42lVUl9j49KNMXphgUpNqshjcQ5lNA4MHrVQD9nrm61JtnbzKcGGdYeWg5' --register no --directory /var/cache/mkosi/194c50ed45cf4e79/image-8f4140bc33514e87 --setenv enforcing=0 --setenv loglevel=6 --setenv module_blacklist=vmw_vmci --setenv ip=enc0:any --setenv ip=enp0s1:any --setenv ip=enp0s2:any --setenv ip=host0:any --setenv ip=none --setenv loglevel=4 --setenv SYSTEMD_SULOGIN_FORCE=1 --setenv console=hvc0 --setenv TERM=dumb systemd.mask=systemd-resolved.service systemd.log_ratelimit_kmsg=0 systemd.crash_shell printk.devkmsg=on systemd.early_core_pattern=/core systemd.default_device_timeout_sec=180 systemd.log_level=debug udev.log_level=info systemd.show_status=false systemd.journald.forward_to_console systemd.journald.max_level_console=info systemd.firstboot=no systemd.unit=mkosi-check-and-shutdown.service rw systemd.wants=network.target systemd.tty.term.hvc0=dumb systemd.tty.columns.hvc0=80 systemd.tty.rows.hvc0=24 systemd.tty.term.console=dumb systemd.tty.columns.console=80 systemd.tty.rows.console=24

    
    # - name: Install Docker
    #   run: |
    #     curl -fsSL https://get.docker.com -o get-docker.sh
    #     sudo sh get-docker.sh
    # - name: Start Docker
    #   run: |
    #     sudo systemctl start docker || (sudo dockerd > /tmp/dockerd.log 2>&1 & sleep 10)
    # - name: Docker test
    #   run: |

    #     docker info
    #     docker ps 
    #     sudo docker info
